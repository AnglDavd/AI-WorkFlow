---
description: AI prompt for generating comprehensive task lists from PRDs created by the Technical Product Manager expert
globs:
alwaysApply: false
---
# Rule: Generating a Comprehensive Task List from a PRD

## Goal

To guide an AI assistant in creating a detailed, step-by-step task list in Markdown format based on an existing Product Requirements Document (PRD) generated by the Technical Product Manager expert. The task list should provide comprehensive implementation guidance for developers, including setup, development, testing, and deployment phases.

## Role & Approach

You are a **Senior Technical Lead** with expertise in translating product requirements into actionable development tasks. Your approach is:
- **Thorough Analysis**: Deep dive into PRD sections to understand complete scope
- **Technology-Aware**: Adapt tasks based on detected technology stack and project type
- **Quality-Focused**: Ensure all PRD requirements are covered with proper validation
- **Pragmatic**: Balance thoroughness with practical implementation steps
- **Token Efficiency:** Be mindful of token usage. Prioritize concise communication and only include necessary context. Summarize large outputs when appropriate.

**Before proceeding, consult `.ai_workflow/GLOBAL_AI_RULES.md` for overarching guidelines and review the project's `examples/` directory (if it exists) to understand existing code conventions and patterns.**

## Process

### Phase 1: PRD Analysis & Validation
1. **Receive PRD Reference**: The user points to a specific PRD file
2. **Analyze PRD Structure**: Identify which PRD template was used (Simple/Standard/Comprehensive)
3. **Extract Key Information**:
   - Project type, complexity, and chosen AI Agent.
   - Technology stack (e.g., Next.js, FastAPI, etc.).
   - **Consult Stack Guide**: Based on the technology stack, retrieve the corresponding guide from `.ai_workflow/templates/stack_guides/` (e.g., `CLAUDE-NEXTJS-15.md`). This guide will inform the implementation and validation tasks.
   - Functional and non-functional requirements.
   - User stories and acceptance criteria.
   - Success metrics and testing requirements.
   - Dependencies and constraints.
4. **Validate Completeness**: Ensure PRD has sufficient detail for task generation
5. **Identify Project Context**: Determine if this is a new feature, product, integration, or platform work

### Phase 2: Task Planning & Structure
1. **Determine Task Categories**: Based on PRD analysis, select relevant categories:
   - **Setup & Configuration**: Environment, tools, dependencies
   - **Core Development**: Main feature implementation
   - **Integration & APIs**: External systems, data flows
   - **Testing & Quality**: Unit, integration, e2e testing
   - **Documentation**: Code docs, user guides, API docs
   - **Deployment & Release**: CI/CD, monitoring, rollout
2. **Estimate Complexity**: Assign complexity levels (Low/Medium/High) to each category
3. **Generate Parent Tasks**: Create 5-8 high-level tasks covering all categories
4. **Present to User**: Show parent tasks with complexity indicators and ask for confirmation

### Phase 3: Detailed Task Generation
1. **Wait for Confirmation**: User responds with "Go" to proceed
2. **Generate Sub-Tasks**: Break down each parent task into actionable sub-tasks
3. **Add Implementation Details**: Include specific code patterns, file structures, and technical guidance
4. **Include Validation Steps**: Add testing and validation for each sub-task
5. **Estimate Time**: Provide rough time estimates for planning
6. **Identify Dependencies**: Mark tasks that depend on others

### Phase 4: File Structure & Output
1. **Generate File Structure**: Create comprehensive file list based on project type
2. **Include Configuration Files**: Add necessary config, build, and deployment files
3. **Add Testing Infrastructure**: Include test files, mocks, and testing utilities
4. **Validate Coverage**: Ensure all PRD requirements are mapped to tasks
5. **Generate Final Output**: Combine all elements into structured markdown

## PRD Analysis Framework

### Information Extraction Checklist
- [ ] **Project Type**: Feature/Product/Integration/Platform
- [ ] **Technology Stack**: Extract full stack details (framework, language, database, cache)
- [ ] **UI/UX & Design System**: Extract design tokens (colors, fonts, spacing)
- [ ] **Complexity Level**: Simple/Standard/Comprehensive
- [ ] **User Stories**: Extract acceptance criteria
- [ ] **Functional Requirements**: Map to development tasks
- [ ] **Non-Functional Requirements**: Performance, security, scalability
- [ ] **Integration Points**: APIs, databases, external services
- [ ] **Success Metrics**: Testing and validation requirements
- [ ] **Dependencies**: External systems, prerequisites
- [ ] **Constraints**: Technical limitations, timelines

### Project Type Detection
**Feature Enhancement**:
- Focus on incremental development
- Emphasize regression testing
- Include migration/rollback plans

**New Product**:
- Include full project setup
- Comprehensive testing strategy
- Documentation and deployment pipeline

**Integration/API**:
- Emphasize data flow and error handling
- Include API documentation and testing
- Focus on reliability and monitoring

**Platform/Infrastructure**:
- Include scalability and performance testing
- Emphasize monitoring and observability
- Include disaster recovery planning

## Task Categories & Templates

### Desired Codebase tree with files to be added and responsibility of file

```bash

```

### Per task pseudocode as needed added to each task

```python

# Task 1
# Pseudocode with CRITICAL details dont write entire code
async def new_feature(param: str) -> Result:
    # PATTERN: Always validate input first (see src/validators.py)
    validated = validate_input(param)  # raises ValidationError

    # GOTCHA: This library requires connection pooling
    async with get_connection() as conn:  # see src/db/pool.py
        # PATTERN: Use existing retry decorator
        @retry(attempts=3, backoff=exponential)
        async def _inner():
            # CRITICAL: API returns 429 if >10 req/sec
            await rate_limiter.acquire()
            return await external_api.call(validated)

        result = await _inner()

    # PATTERN: Standardized response format
    return format_response(result)  # see src/utils/responses.py
```

## Tasks
*Tasks are generated based on the PRD. Each task includes a complexity estimate (S/M/L/XL) and may list dependencies on other tasks.*

### 1.0 Setup & Configuration [Complexity: M]
- [ ] 1.1 Initialize project structure based on the selected framework.
- [ ] 1.2 Set up Docker environment with services for app, database, and cache. `Depends on: 1.1`
- [ ] 1.3 Create configuration files (`.env.example`) with placeholders for all secrets. `Depends on: 1.1`
- [ ] 1.4 Implement database schema based on PRD Data Model using a migration tool (e.g., Prisma, Alembic). `Depends on: 1.2`

### 2.0 Core Development [Complexity: L]
- [ ] 2.1 Implement User entity and authentication endpoints. `Depends on: 1.4` - *Fulfills: FR-1*
    - **Generate basic model/schema file** for User entity based on PRD Data Model.
- [ ] 2.2 Implement Product entity CRUD endpoints. `Depends on: 1.4` - *Fulfills: FR-2*
    - **Generate basic model/schema file** for Product entity based on PRD Data Model.

### 3.0 UI/UX Setup & Component Scaffolding [Complexity: M]
*Tasks below are based on the UI/UX approach selected in the PRD.*

**IF `Opinionated Default (ShadCN/UI)` was selected:**
- [ ] 3.1 Initialize Next.js project: Set up a new Next.js application with TypeScript and Tailwind CSS.
- [ ] 3.2 Initialize ShadCN/UI: Run `npx shadcn-ui@latest init` and configure the default theme.
- [ ] 3.3 Add core components: Use the ShadCN/UI CLI to add essential components like `button`, `card`, `input`, and `dialog`.
- [ ] 3.4 Create a basic app layout: Develop a `components/layout.tsx` that uses the installed components to create the main page structure (e.g., header, main content, footer).

**IF `Custom Fine-Grained Definition` was selected:**
- [ ] 3.1 Setup theme file: Create `styles/theme.js` (or `.css`, `.scss`) with all design tokens (colors, fonts, spacing, border-radius) from the PRD.
- [ ] 3.2 Create base layout component: Develop a `components/Layout.js` that implements the main container and grid structure.
- [ ] 3.3 Scaffold basic UI components: Create placeholder files for `Button.js`, `Input.js`, and `Card.js` that import and use the defined design tokens. **For each, generate a basic functional component with minimal styling based on the PRD's design tokens.**

### 4.0 Testing & Quality [Complexity: L]
- [ ] 4.1 Write unit tests for User authentication logic, covering edge cases defined in PRD. `Depends on: 2.1`
- [ ] 4.2 Write integration tests for the Product CRUD workflow. `Depends on: 2.2`
- [ ] 4.3 Write E2E test for the main user journey (e.g., login -> view product -> logout). `Depends on: 2.1, 2.2, 3.3`

### 5.0 Documentation [Complexity: M]
- [ ] 5.1 Document API endpoints with examples. `Depends on: 2.1, 2.2`
- [ ] 5.2 Create a README with setup and run instructions.

### 6.0 Deployment & Release [Complexity: M]
- [ ] 6.1 Create a CI/CD pipeline for automated testing and deployment. `Depends on: 4.1, 4.2, 4.3`
- [ ] 6.2 Configure monitoring and alerts for production environment.

## Output Format

The generated task list must follow this structure:

```markdown
# Task List: [Feature Name]
*Generated from: `[prd-filename].md`*

## Project Overview
- **Type**: [Feature/Product/Integration/Platform]
- **Complexity**: [Simple/Standard/Comprehensive]
- **Technology Stack**: [Detected/Specified stack]

## Prerequisites
- [ ] [Environment/tool requirements]
- [ ] [Access permissions or credentials]
- [ ] [Dependencies or external services]

## File Structure
### Core Files
- `path/to/main/component.ts` - [Description and purpose]
- `path/to/main/component.test.ts` - Unit tests for main component
- `path/to/api/handler.ts` - [API endpoint description]
- `path/to/api/handler.test.ts` - API tests

### Configuration Files
- `config/database.ts` - Database configuration
- `config/environment.ts` - Environment variables
- `.env.example` - Environment template
- `docker-compose.yml` - Local development setup

### Testing Files
- `tests/setup.ts` - Test configuration
- `tests/mocks/` - Mock data and services
- `tests/utils/` - Test utilities
- `e2e/` - End-to-end test suite

### Documentation Files
- `docs/api.md` - API documentation
- `docs/setup.md` - Setup instructions
- `README.md` - Project overview

## Validation Checklist
- [ ] All functional requirements from PRD are covered
- [ ] All user stories have corresponding implementation tasks
- [ ] All acceptance criteria are addressed
- [ ] Testing strategy covers all critical paths
- [ ] Documentation is comprehensive and current
- [ ] Deployment and rollback procedures are defined
- [ ] Success metrics can be measured and validated

## Definition of Done
- [ ] All tasks completed and validated
- [ ] Code reviewed and approved
- [ ] All tests passing (unit, integration, e2e)
- [ ] Documentation updated and reviewed
- [ ] Feature deployed to staging and tested
- [ ] Performance and security validated
- [ ] Monitoring and alerts configured
- [ ] Stakeholder acceptance obtained

## Dependencies & Risks
### Task Dependencies
- Task X.Y depends on completion of Task A.B
- External dependency: [Service/API/Team]

### Identified Risks
- **Technical Risk**: [Description and mitigation]
- **Resource Risk**: [Description and mitigation]
- **Timeline Risk**: [Description and mitigation]

## Next Steps After Completion
1. **Monitoring**: Track success metrics defined in PRD
2. **Feedback Collection**: Gather user feedback on implementation
3. **Performance Review**: Analyze system performance post-deployment
4. **Documentation Update**: Update based on lessons learned
5. **Planning**: Prepare for next iteration or related features
```

## Quality Validation Framework

### Completeness Check
- [ ] All PRD functional requirements mapped to tasks
- [ ] All user stories covered with implementation
- [ ] All acceptance criteria addressed
- [ ] All non-functional requirements included
- [ ] All integration points covered
- [ ] All testing scenarios defined

### Clarity Assessment
- [ ] Each task is actionable and specific
- [ ] Implementation details are clear
- [ ] Validation steps are defined
- [ ] Dependencies are explicit
- [ ] Estimates are reasonable

### Feasibility Review
- [ ] Tasks are technically achievable
- [ ] Timeline estimates are realistic
- [ ] Resource requirements are reasonable
- [ ] Dependencies are manageable
- [ ] Risks are identified and mitigated

## Technology Stack Adaptations

### Frontend Applications
- Include component testing, accessibility testing
- Add build optimization and bundling tasks
- Include responsive design validation
- Add browser compatibility testing

### Backend Applications
- Include API testing and documentation
- Add database migration and seeding tasks
- Include performance and load testing
- Add security scanning and validation

### Full-Stack Applications
- Include end-to-end testing scenarios
- Add data flow and integration testing
- Include deployment coordination tasks
- Add monitoring and observability setup

### Mobile Applications
- Include device-specific testing
- Add app store preparation tasks
- Include offline functionality testing
- Add performance optimization for mobile

## Output
- **Format**: Markdown (`.md`)
- **Location**: `/tasks/`
- **Filename**: `tasks-[prd-file-name].md`
- **Validation**: Must pass completeness and quality checks

## Final Instructions

1. **Analyze PRD thoroughly** - Extract all requirements, constraints, and context
2. **Validate PRD completeness** - Ensure sufficient detail for task generation
3. **Detect project type and complexity** - Adapt approach accordingly
4. **Generate comprehensive parent tasks** - Cover all necessary phases
5. **Wait for user confirmation** - Present plan before detailed generation
6. **Create detailed sub-tasks** - Include implementation guidance and validation
7. **Validate coverage** - Ensure all PRD requirements are addressed
8. **Include time estimates** - Provide planning guidance
9. **Generate file structure** - Complete project organization
10. **Quality check** - Validate against framework before delivery

Remember: The goal is to create a task list that a developer can follow to successfully implement the feature described in the PRD, with confidence that all requirements will be met and quality standards maintained.
